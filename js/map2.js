ymaps.ready(init);
            
function init() {
    var map = new ymaps.Map("map", {
        center: [41.27060103232188, 69.20635608472475], // Chilonzor centre
        zoom: 12,
        controls: ['fullscreenControl']
    });

    var neighborhoods = {
        al_xorazmiy: createDistrictPolygon(
            [[41.263111, 69.154577],
            [41.262172, 69.154942],
            [41.260505, 69.155575],
            [41.260246, 69.154480],
            [41.260254, 69.154255],
            [41.259485, 69.152818],
            [41.260318, 69.151712],
            [41.259412, 69.150414],
            [41.260691, 69.149620],
            [41.261492, 69.150071],
            [41.262019, 69.151616],
            [41.262440, 69.152818],
            [41.262998, 69.154556]],
            "Al Xorazmiy mahalla", "12.34"
        ),
        katta_xirmontepa: createDistrictPolygon(
            [[41.271467, 69.177231],
            [41.270593, 69.178057],
            [41.269872, 69.178744],
            [41.269370, 69.179484],
            [41.268286, 69.181243],
            [41.268156, 69.181222],
            [41.268043, 69.181077],
            [41.267294, 69.180385],
            [41.267500, 69.180069],
            [41.267051, 69.179344],
            [41.266671, 69.178685],
            [41.266165, 69.177837],
            [41.265554, 69.176737],
            [41.266051, 69.175831],
            [41.266816, 69.174527],
            [41.267067, 69.174157],
            [41.267905, 69.173245],
            [41.268860, 69.172199],
            [41.270985, 69.175654],
            [41.271167, 69.176075],
            [41.271335, 69.176761],
            [41.271458, 69.177227],],
            "Katta Xirmontepa", "22.3"
        ) ,
        qizil_sharq: createDistrictPolygon(
            [[41.268786, 69.164141],
            [41.268580, 69.164860],
            [41.268341, 69.165745],
            [41.268065, 69.166729],
            [41.267709, 69.168016],
            [41.267580, 69.168499],
            [41.267434, 69.168880],
            [41.267175, 69.169293],
            [41.267001, 69.169373],
            [41.265945, 69.168263],
            [41.263601, 69.165731],
            [41.265225, 69.163120],
            [41.265225, 69.163120],
            [41.265477, 69.163428],
            [41.265787, 69.162908],
            [41.266014, 69.162792],
            [41.266329, 69.162674],
            [41.266689, 69.162267],
            [41.267046, 69.162642],
            [41.267515, 69.163028],
            [41.268094, 69.163458],
            [41.268094, 69.163458],
            [41.268690, 69.163939],
            [41.268770, 69.164136],],
            "Qizil Sharq", "2.3"
        ),
        sharq_tongi: createDistrictPolygon(
            [[41.267794, 69.167795],
            [41.267988, 69.167988],
            [41.268847, 69.169415],
            [41.269842, 69.171164],
            [41.268126, 69.172988],
            [41.266548, 69.170520],
            [41.266046, 69.171131],
            [41.265406, 69.172784],
            [41.261561, 69.169007],
            [41.261188, 69.168717],
            [41.260662, 69.168578],
            [41.260784, 69.166389],
            [41.260826, 69.166220],
            [41.261039, 69.165815],
            [41.262128, 69.164083],
            [41.264580, 69.166733],
            [41.266993, 69.169383],
            [41.266993, 69.169383],
            [41.267794, 69.167800],
            [41.268009, 69.168015],],
            "Sharq tongi", "0.9"
        ),
        sharaf: createDistrictPolygon(
            [[41.265478, 69.160267],
            [41.266220, 69.161626],
            [41.266435, 69.161978],
            [41.266682, 69.162280],
            [41.266309, 69.162679],
            [41.265773, 69.162929],
            [41.265487, 69.163419],
            [41.265302, 69.163248],
            [41.265228, 69.163119],
            [41.263603, 69.165732],
            [41.262112, 69.164110],
            [41.263153, 69.162368],
            [41.263443, 69.161990],
            [41.263823, 69.161661],
            [41.264534, 69.161042],
            [41.265462, 69.160267]],
            "sharaf", '0.6'
        ),
        qozirobod: createDistrictPolygon(
            [[41.274458, 69.204741],
            [41.275934, 69.205942],
            [41.277502, 69.207386],
            [41.279242, 69.209208],
            [41.282123, 69.212392],
            [41.282123, 69.212392],
            [41.282123, 69.212392],
            [41.282123, 69.212392],
            [41.270781, 69.222918],
            [41.269550, 69.221776],
            [41.269036, 69.221724],
            [41.268185, 69.221147],
            [41.267116, 69.220806],
            [41.266562, 69.220465],
            [41.266027, 69.219756],
            [41.266106, 69.219363],
            [41.266106, 69.219363],
            [41.274396, 69.204833]],
            "Qozirobod", '8.6'
        ),
        gavhar: createDistrictPolygon(
            [[41.270166, 69.211441],
            [41.265478, 69.218638],
            [41.265136, 69.218270],
            [41.263662, 69.218553],
            [41.262359, 69.218213],
            [41.259516, 69.216104],
            [41.259257, 69.213915],
            [41.260731, 69.212113],
            [41.263419, 69.212671],
            [41.263710, 69.210032],
            [41.262933, 69.208701],
            [41.263532, 69.206985],
            [41.263532, 69.206985],
            [41.270108, 69.211291]],
            "gavhar", '5.6'
        ),
        dombirobod: createDistrictPolygon(
            [[41.254520, 69.203820],
            [41.260123, 69.205275],
            [41.263474, 69.207036],
            [41.262934, 69.208796],
            [41.259430, 69.208186],
            [41.263454, 69.212650],
            [41.260759, 69.212114],
            [41.259276, 69.213823],
            [41.258429, 69.211680],
            [41.256465, 69.208337],
            [41.255155, 69.206091],
            [41.254501, 69.204025]],
            "Do'mbirobod", '4.5'
        ),
        katta_dombirobod: createDistrictPolygon(
            [[41.271892, 69.208884],
            [41.270186, 69.211354],
            [41.263158, 69.206892],
            [41.260330, 69.205410],
            [41.254421, 69.203823],
            [41.254262, 69.202173],
            [41.254389, 69.195718],
            [41.261891, 69.203155],
            [41.258621, 69.195866],
            [41.260554, 69.196734],
            [41.259851, 69.198469],
            [41.266637, 69.202321],
            [41.267292, 69.203527],
            [41.269171, 69.206909],
            [41.269493, 69.207151],
            [41.270485, 69.207291],
            [41.270833, 69.207498],
            [41.271841, 69.208673]],
            "katta do'mbirobod", '4.7'
        ),
        naqqoshlik: createDistrictPolygon(
            [[41.259899, 69.198370],
            [41.260537, 69.196750],
            [41.264427, 69.198856],
            [41.269447, 69.201577],
            [41.272921, 69.203513],
            [41.274507, 69.204652],
            [41.271904, 69.208682],
            [41.270698, 69.207385],
            [41.269335, 69.207084],
            [41.268321, 69.205415],
            [41.266956, 69.202729],
            [41.266575, 69.202330],
            [41.260011, 69.198606]],
            "Naqqoshlik", '3.5'
        ),
        mevazor: createDistrictPolygon(
            [[41.269162, 69.192983],
            [41.268994, 69.193799],
            [41.267876, 69.193343],
            [41.267438, 69.194546],
            [41.266985, 69.194525],
            [41.267000, 69.195447],
            [41.266868, 69.195862],
            [41.267104, 69.196001],
            [41.266844, 69.196781],
            [41.266776, 69.196751],
            [41.266296, 69.198275],
            [41.266363, 69.198787],
            [41.266040, 69.199721],
            [41.262903, 69.198030],
            [41.263155, 69.197114],
            [41.263099, 69.196997],
            [41.263150, 69.196409],
            [41.262846, 69.195992],
            [41.262524, 69.195146],
            [41.262487, 69.194867],
            [41.263035, 69.193799],
            [41.263008, 69.193408],
            [41.262671, 69.192759],
            [41.263846, 69.189715],
            [41.268005, 69.192473],
            [41.269128, 69.192963]],
            "Mevazor", '6.7'
        ),
        borijar: createDistrictPolygon(
            [[41.270645, 69.192098],
            [41.270446, 69.192392],
            [41.270201, 69.193368],
            [41.267980, 69.192469],
            [41.262533, 69.188798],
            [41.261541, 69.188863],
            [41.261249, 69.189240],
            [41.261127, 69.189082],
            [41.261089, 69.188542],
            [41.260916, 69.187728],
            [41.261292, 69.187623],
            [41.262577, 69.187585],
            [41.264594, 69.188630],
            [41.266970, 69.189943],
            [41.270633, 69.192040]],
            "Bo'rijar", '5.6'
        ),
        shuhrat: createDistrictPolygon(
            [[41.267720, 69.182608],
            [41.268427, 69.183913],
            [41.268759, 69.183852],
            [41.269963, 69.182589],
            [41.270925, 69.184439],
            [41.269871, 69.185485],
            [41.270042, 69.185800],
            [41.268776, 69.187129],
            [41.268313, 69.188623],
            [41.268280, 69.188947],
            [41.267843, 69.190450],
            [41.264811, 69.188716],
            [41.265674, 69.186028],
            [41.266077, 69.185284],
            [41.266722, 69.184428],
            [41.267426, 69.183506],
            [41.267681, 69.182675]],
            "shuhrat", '5.7'
        ),
        yakkatut: createDistrictPolygon(
            [[41.265570, 69.176730],
            [41.266655, 69.178693],
            [41.267513, 69.180067],
            [41.267302, 69.180367],
            [41.268055, 69.181086],
            [41.268135, 69.181118],
            [41.268269, 69.181253],
            [41.267723, 69.182524],
            [41.267537, 69.183189],
            [41.267391, 69.183521],
            [41.266703, 69.184444],
            [41.266104, 69.185206],
            [41.265837, 69.185624],
            [41.265586, 69.186225],
            [41.264809, 69.188661],
            [41.264602, 69.183258],
            [41.261487, 69.187609],
            [41.262819, 69.182556],
            [41.263185, 69.181220],
            [41.263749, 69.180034],
            [41.265539, 69.176748]],
            "Yakatut", '4.6'
        ),
        kichik_xirmontepa: createDistrictPolygon(
            [[41.272783, 69.182889],
            [41.273883, 69.187590],
            [41.271441, 69.189964],
            [41.270844, 69.191776],
            [41.270685, 69.192043],
            [41.267843, 69.190422],
            [41.268290, 69.188935],
            [41.268325, 69.188582],
            [41.268707, 69.187256],
            [41.268866, 69.187002],
            [41.270041, 69.185807],
            [41.269869, 69.185482],
            [41.272459, 69.183051],
            [41.272523, 69.182999],
            [41.272632, 69.182944],
            [41.272784, 69.182865]],
            "Kichik xirmontepa", '4.6'
        ),
        xontopi: createDistrictPolygon(
            [[41.260646, 69.168526],
            [41.261198, 69.168726],
            [41.261577, 69.169021],
            [41.263386, 69.170792],
            [41.265235, 69.172585],
            [41.265588, 69.173065],
            [41.265348, 69.173753],
            [41.265117, 69.174113],
            [41.264853, 69.174409],
            [41.264718, 69.174473],
            [41.264079, 69.175266],
            [41.262163, 69.177234],
            [41.261340, 69.178441],
            [41.261181, 69.179224],
            [41.261045, 69.179604],
            [41.260614, 69.181922],
            [41.260496, 69.182920],
            [41.260483, 69.183347],
            [41.262196, 69.173592],
            [41.259457, 69.182779],
            [41.259967, 69.180091],
            [41.260056, 69.179328],
            [41.260176, 69.177068],
            [41.260461, 69.171950],
            [41.260645, 69.168562]],
            "Xonto'pi", '6.8'
        ),
        beshqorgon: createDistrictPolygon(
            [[41.253175, 69.159924],
            [41.254361, 69.161039],
            [41.253825, 69.167476],
            [41.254197, 69.167640],
            [41.253970, 69.170622],
            [41.253280, 69.170573],
            [41.253150, 69.176685],
            [41.253290, 69.178575],
            [41.254629, 69.182884],
            [41.254747, 69.185310],
            [41.254573, 69.185732],
            [41.254051, 69.185502],
            [41.252689, 69.186962],
            [41.250370, 69.183351],
            [41.240948, 69.193453],
            [41.240455, 69.194375],
            [41.236241, 69.187911],
            [41.222569, 69.174521],
            [41.225171, 69.171936],
            [41.226145, 69.171797],
            [41.227151, 69.173867],
            [41.227440, 69.173749],
            [41.228310, 69.174088],
            [41.230547, 69.172192],
            [41.234807, 69.168694],
            [41.235732, 69.165753],
            [41.235578, 69.164790],
            [41.235871, 69.164561],
            [41.236724, 69.165471],
            [41.236724, 69.165471],
            [41.239888, 69.166664],
            [41.239888, 69.166664],
            [41.249848, 69.163505],
            [41.249848, 69.163505],
            [41.253330, 69.159727]],
            "Beshqo'rg'on", '6.9'
        ),
        yakkabog: createDistrictPolygon(
            [[41.263891, 69.189697],
            [41.262708, 69.192739],
            [41.263045, 69.193448],
            [41.263024, 69.193872],
            [41.262560, 69.194665],
            [41.262498, 69.195021],
            [41.262880, 69.195978],
            [41.263126, 69.196376],
            [41.263104, 69.196871],
            [41.263171, 69.197137],
            [41.262904, 69.198020],
            [41.259037, 69.195935],
            [41.254396, 69.195723],
            [41.254356, 69.191428],
            [41.253836, 69.188831],
            [41.252689, 69.186904],
            [41.254001, 69.185502],
            [41.254433, 69.185557],
            [41.259090, 69.188477],
            [41.259352, 69.188412],
            [41.260950, 69.187700],
            [41.261138, 69.188621],
            [41.261138, 69.189073],
            [41.261233, 69.189231],
            [41.261539, 69.188826],
            [41.262457, 69.188788],
            [41.263804, 69.189707]],
            "Yakkabog'", '6.5'
        ),
        qatortol_2: createDistrictPolygon(
            [[41.267876, 69.193336],
            [41.268975, 69.193776],
            [41.269158, 69.192957],
            [41.270223, 69.193367],
            [41.268311, 69.200953],
            [41.266056, 69.199709],
            [41.266353, 69.198768],
            [41.266296, 69.198237],
            [41.266765, 69.196765],
            [41.266847, 69.196789],
            [41.267106, 69.195995],
            [41.266872, 69.195849],
            [41.267016, 69.195413],
            [41.266967, 69.194562],
            [41.267420, 69.194555],
            [41.267857, 69.193355]],
            "2-qatortol", '5.6'
        ),
        guliston: createDistrictPolygon(
            [[41.257862, 69.159576],
            [41.260193, 69.155819],
            [41.260776, 69.155418],
            [41.263050, 69.154665],
            [41.263863, 69.156849],
            [41.263489, 69.157078],
            [41.262964, 69.157946],
            [41.262532, 69.158012],
            [41.262367, 69.158155],
            [41.261956, 69.158937],
            [41.262014, 69.159176],
            [41.261777, 69.159719],
            [41.261875, 69.159845],
            [41.261625, 69.160229],
            [41.261544, 69.160162],
            [41.261400, 69.160436],
            [41.261378, 69.160557],
            [41.261497, 69.161254],
            [41.261246, 69.161457],
            [41.260589, 69.162499],
            [41.257811, 69.159578]],
            "Guliston", '4.5'
        ),
        bahoriston: createDistrictPolygon(
            [[41.263886, 69.156831],
            [41.264211, 69.157839],
            [41.265476, 69.160254],
            [41.263468, 69.161978],
            [41.263178, 69.162316],
            [41.262121, 69.164101],
            [41.260600, 69.162501],
            [41.261260, 69.161448],
            [41.261507, 69.161264],
            [41.261387, 69.160498],
            [41.261542, 69.160157],
            [41.261628, 69.160238],
            [41.261873, 69.159842],
            [41.261764, 69.159706],
            [41.262021, 69.159192],
            [41.261958, 69.158931],
            [41.262398, 69.158123],
            [41.262554, 69.157992],
            [41.262955, 69.157946],
            [41.263470, 69.157105],
            [41.263850, 69.156859]],
            "Bahoriston", '5.6'
        ),
        xirmontepa: createDistrictPolygon(
            [[41.271463, 69.177215],
            [41.272803, 69.182835],
            [41.272517, 69.183001],
            [41.270932, 69.184448],
            [41.269959, 69.182599],
            [41.268761, 69.183851],
            [41.268441, 69.183925],
            [41.267691, 69.182600],
            [41.267795, 69.182189],
            [41.268124, 69.181502],
            [41.268124, 69.181502],
            [41.269830, 69.178781],
            [41.270512, 69.178119],
            [41.271446, 69.177223]],
            "Xirmontepa", '7.6'
        ),
        beshyogoch: createDistrictPolygon(
            [[41.299650, 69.231459],
            [41.306510, 69.237188],
            [41.310296, 69.240151],
            [41.311896, 69.240371],
            [41.311820, 69.242633],
            [41.311337, 69.242894],
            [41.309496, 69.242733],
            [41.309179, 69.242834],
            [41.305254, 69.246457],
            [41.305254, 69.246457],
            [41.310628, 69.246397],
            [41.310643, 69.245997],
            [41.311625, 69.246123],
            [41.311112, 69.259958],
            [41.310542, 69.259731],
            [41.310089, 69.258966],
            [41.309140, 69.258364],
            [41.304376, 69.253660],
            [41.303428, 69.253550],
            [41.302442, 69.252525],
            [41.302251, 69.251559],
            [41.301817, 69.251099],
            [41.301210, 69.249996],
            [41.300968, 69.249421],
            [41.303101, 69.246063],
            [41.297620, 69.243050],
            [41.297395, 69.241946],
            [41.297568, 69.239509],
            [41.298611, 69.234573],
            [41.299661, 69.231413]],
            "beshyog'och", '5.7'
        ),
        katta_olmazor: createDistrictPolygon(
            [[41.305261, 69.246428],
            [41.309249, 69.242764],
            [41.309575, 69.242748],
            [41.311387, 69.242897],
            [41.311778, 69.242700],
            [41.311643, 69.246122],
            [41.310650, 69.246024],
            [41.310657, 69.245988],
            [41.310630, 69.246445],
            [41.309625, 69.246387],
            [41.307468, 69.246521],
            [41.305799, 69.246521],
            [41.305258, 69.246429]],
            "katta olmazor", '6.7'
        ),
        novza: createDistrictPolygon(
            [[41.282143, 69.212442],
            [41.295551, 69.227304],
            [41.294753, 69.228581],
            [41.294783, 69.228659],
            [41.294666, 69.228873],
            [41.294496, 69.228689],
            [41.293791, 69.229871],
            [41.293783, 69.230074],
            [41.293528, 69.230198],
            [41.293417, 69.229466],
            [41.293078, 69.229612],
            [41.293052, 69.229421],
            [41.292823, 69.229241],
            [41.292687, 69.228847],
            [41.292644, 69.228464],
            [41.292491, 69.228317],
            [41.292313, 69.228115],
            [41.291803, 69.226966],
            [41.291769, 69.226752],
            [41.291693, 69.226605],
            [41.291226, 69.226696],
            [41.291081, 69.226313],
            [41.291007, 69.226274],
            [41.290768, 69.226561],
            [41.290317, 69.226113],
            [41.289830, 69.225614],
            [41.289636, 69.225689],
            [41.289254, 69.225705],
            [41.289129, 69.225423],
            [41.288528, 69.224784],
            [41.288396, 69.224444],
            [41.288132, 69.224274],
            [41.287907, 69.223783],
            [41.287611, 69.222680],
            [41.287341, 69.222185],
            [41.287393, 69.221690],
            [41.286942, 69.220956],
            [41.286929, 69.220154],
            [41.285886, 69.219113],
            [41.285143, 69.219025],
            [41.284440, 69.218843],
            [41.283933, 69.218378],
            [41.282391, 69.219154],
            [41.282059, 69.219025],
            [41.281864, 69.219180],
            [41.281064, 69.219076],
            [41.280808, 69.218217],
            [41.280539, 69.218306],
            [41.279889, 69.217919],
            [41.279138, 69.217221],
            [41.282124, 69.212416]],
            'novza', '4.7'
        ),
        mehrjon: createDistrictPolygon(
            [[41.270695, 69.192036],
            [41.270839, 69.191774],
            [41.271436, 69.190000],
            [41.273618, 69.187804],
            [41.273910, 69.187595],
            [41.275262, 69.193429],
            [41.275639, 69.194149],
            [41.275415, 69.194542],
            [41.275244, 69.194821],
            [41.274579, 69.194351],
            [41.273762, 69.193851],
            [41.270718, 69.192078]],
            'mehrjon', '5.9'
        ),
        botirma: createDistrictPolygon(
            [[41.270503, 69.192328],
            [41.270703, 69.192064],
            [41.273307, 69.193575],
            [41.275280, 69.194821],
            [41.275223, 69.195163],
            [41.275300, 69.195274],
            [41.275182, 69.195476],
            [41.275077, 69.195891],
            [41.274271, 69.196987],
            [41.273889, 69.197420],
            [41.272666, 69.198360],
            [41.271985, 69.199087],
            [41.271186, 69.200110],
            [41.270685, 69.200782],
            [41.270630, 69.200948],
            [41.270414, 69.202090],
            [41.268322, 69.200976],
            [41.270474, 69.192360]],
            'botirma', '5.7'
        ),
        fidokor: createDistrictPolygon(
            [[41.275693, 69.194160],
            [41.276620, 69.195828],
            [41.277113, 69.196404],
            [41.278847, 69.198175],
            [41.276121, 69.202170],
            [41.274960, 69.200718],
            [41.275235, 69.200237],
            [41.275082, 69.200015],
            [41.275159, 69.199903],
            [41.274857, 69.199520],
            [41.274716, 69.199687],
            [41.273354, 69.197856],
            [41.273855, 69.197439],
            [41.274602, 69.196605],
            [41.275103, 69.195850],
            [41.275162, 69.195472],
            [41.275302, 69.195276],
            [41.275232, 69.195183],
            [41.275232, 69.194831],
            [41.275372, 69.194568],
            [41.275667, 69.194169]],
            'fidokor', '7.8'
        ),
        zarqorgon: createDistrictPolygon(
            [[41.273329, 69.197827],
            [41.274710, 69.199676],
            [41.274856, 69.199522],
            [41.275165, 69.199910],
            [41.275075, 69.200014],
            [41.275239, 69.200242],
            [41.274963, 69.200721],
            [41.274963, 69.200721],
            [41.274484, 69.204715],
            [41.273328, 69.203785],
            [41.272802, 69.203443],
            [41.270402, 69.202112],
            [41.270620, 69.200948],
            [41.270810, 69.200643],
            [41.271695, 69.199424],
            [41.272512, 69.198530],
            [41.272692, 69.198360],
            [41.273312, 69.197848]],
            "Zarqo'rg'on", '9.7'
        ),
        beshchinor: createDistrictPolygon(
            [[41.285693, 69.216295],
            [41.286345, 69.215380],
            [41.286281, 69.215314],
            [41.286782, 69.214654],
            [41.287311, 69.214173],
            [41.287895, 69.213890],
            [41.289516, 69.213380],
            [41.290079, 69.213108],
            [41.290680, 69.212701],
            [41.291613, 69.211210],
            [41.296420, 69.216482],
            [41.292042, 69.223364],
            [41.285702, 69.216389]],
            "Beshchinor", '4.7'
        ),
        charx_kamolon_1: createDistrictPolygon(
            [[41.295564, 69.227369],
            [41.299665, 69.231416],
            [41.298586, 69.234611],
            [41.297921, 69.237711],
            [41.297432, 69.240399],
            [41.297358, 69.241988],
            [41.295894, 69.241968],
            [41.295390, 69.241713],
            [41.295006, 69.241380],
            [41.294902, 69.240791],
            [41.294784, 69.240497],
            [41.295524, 69.239281],
            [41.295982, 69.239144],
            [41.296268, 69.239338],
            [41.296474, 69.239229],
            [41.296941, 69.238013],
            [41.296379, 69.237456],
            [41.296894, 69.236541],
            [41.296395, 69.235354],
            [41.295673, 69.234902],
            [41.295420, 69.233998],
            [41.295206, 69.233715],
            [41.294984, 69.232916],
            [41.294374, 69.232012],
            [41.294057, 69.231960],
            [41.293867, 69.232107],
            [41.293819, 69.231792],
            [41.293660, 69.231697],
            [41.293391, 69.231781],
            [41.293233, 69.231550],
            [41.293185, 69.231298],
            [41.293042, 69.231014],
            [41.293084, 69.230888],
            [41.293258, 69.230840],
            [41.293403, 69.230641],
            [41.293320, 69.230398],
            [41.293207, 69.230186],
            [41.293082, 69.229617],
            [41.293423, 69.229470],
            [41.293542, 69.230174],
            [41.293779, 69.230070],
            [41.293820, 69.229804],
            [41.294517, 69.228701],
            [41.294671, 69.228892],
            [41.294787, 69.228662],
            [41.294758, 69.228573],
            [41.295551, 69.227311]],
            "1-Charx kamolon", '9.7'
        ),
        kotarma: createDistrictPolygon(
            [[41.278790, 69.198055],
            [41.280924, 69.194699],
            [41.286769, 69.194472],
            [41.286769, 69.194472],
            [41.278793, 69.198030]],
            "ko'tarma", '9.7'
        ),
        kotarma: createDistrictPolygon(
            [[41.286209, 69.195899],
            [41.288609, 69.195871],
            [41.288653, 69.197908],
            [41.289958, 69.197880],
            [41.290032, 69.199618],
            [41.290148, 69.199757],
            [41.290345, 69.199800],
            [41.290426, 69.199870],
            [41.290651, 69.200409],
            [41.289350, 69.201498],
            [41.288283, 69.202729],
            [41.286463, 69.205573],
            [41.283589, 69.202750],
            [41.286197, 69.195904]],
            "Ko'tarma", '9.9'
        ),
        lutfiy: createDistrictPolygon(
            [[41.292141, 69.194228],
            [41.302829, 69.193855],
            [41.301717, 69.197398],
            [41.301781, 69.197856],
            [41.301244, 69.199534],
            [41.300963, 69.199687],
            [41.300746, 69.200365],
            [41.300567, 69.201128],
            [41.300797, 69.210706],
            [41.300004, 69.210706],
            [41.292110, 69.194281]],
            'lutfiy', '0.8'
        ),
        bogzor: createDistrictPolygon(
            [[41.296090, 69.202423],
            [41.299409, 69.209420],
            [41.298280, 69.210328],
            [41.297502, 69.210328],
            [41.297502, 69.210101],
            [41.296142, 69.210135],
            [41.296099, 69.211280],
            [41.294833, 69.211314],
            [41.294688, 69.211269],
            [41.295201, 69.205655],
            [41.295834, 69.202650],
            [41.296081, 69.202390]],
            "Bog'zor", '7.8'
        ),
        oq_tepa: createDistrictPolygon(
            [[41.299425, 69.209433],
            [41.300014, 69.210733],
            [41.296378, 69.216498],
            [41.293607, 69.213433],
            [41.294222, 69.212412],
            [41.294533, 69.211748],
            [41.294693, 69.211240],
            [41.294956, 69.211320],
            [41.296117, 69.211273],
            [41.296122, 69.210148],
            [41.297486, 69.210115],
            [41.297486, 69.210115],
            [41.298269, 69.210329],
            [41.299396, 69.209426]],
            "Oq tepa", '9.6'
        ),
        nafosat: createDistrictPolygon(
            [[41.293902, 69.197763],
            [41.295413, 69.200962],
            [41.292776, 69.203240],
            [41.292208, 69.210016],
            [41.291619, 69.211270],
            [41.288065, 69.207325],
            [41.287560, 69.207241],
            [41.287276, 69.206990],
            [41.286750, 69.206000],
            [41.286456, 69.205568],
            [41.288317, 69.202710],
            [41.289526, 69.201358],
            [41.291125, 69.200047],
            [41.293882, 69.197801]],
            "Nafosat", '7.6'
        ),
        dilobod: createDistrictPolygon(
            [[41.286450, 69.205540],
            [41.286754, 69.205977],
            [41.287179, 69.206793],
            [41.287413, 69.207150],
            [41.288037, 69.207339],
            [41.289052, 69.208461],
            [41.291599, 69.211241],
            [41.290710, 69.212630],
            [41.290452, 69.212897],
            [41.289998, 69.213249],
            [41.289046, 69.213541],
            [41.288169, 69.213758],
            [41.287715, 69.213967],
            [41.287289, 69.212262],
            [41.286558, 69.212279],
            [41.286583, 69.211560],
            [41.286795, 69.211005],
            [41.285913, 69.210415],
            [41.285667, 69.210410],
            [41.285114, 69.209902],
            [41.284332, 69.208954],
            [41.286462, 69.205571]],
            "Dilobod", "5.4"
        ),
        xalqlar_dostligi: createDistrictPolygon(
            [[41.284343, 69.208983],
            [41.285083, 69.209885],
            [41.285661, 69.210408],
            [41.285921, 69.210424],
            [41.286785, 69.211010],
            [41.286583, 69.211566],
            [41.286542, 69.212289],
            [41.287295, 69.212269],
            [41.287719, 69.213964],
            [41.287340, 69.214146],
            [41.286787, 69.214650],
            [41.286282, 69.215352],
            [41.286340, 69.215406],
            [41.285696, 69.216375],
            [41.282122, 69.212425],
            [41.284327, 69.208953]],
            "Xalqlar do'stligi", '8.7'
        ),
        qatortol_1: createDistrictPolygon(
            [[41.295434, 69.200991],
            [41.296084, 69.202397],
            [41.295876, 69.202593],
            [41.295205, 69.205538],
            [41.294736, 69.210983],
            [41.294655, 69.211393],
            [41.294561, 69.211713],
            [41.294306, 69.212256],
            [41.293581, 69.213412],
            [41.291609, 69.211241],
            [41.292105, 69.210387],
            [41.292213, 69.209916],
            [41.292763, 69.203260],
            [41.293045, 69.202940],
            [41.295409, 69.200960]],
            "Qatortol", '8.7'
        ),
        xayrobod: createDistrictPolygon(
            [[41.266630, 69.170549],
            [41.268158, 69.173000],
            [41.266952, 69.174364],
            [41.263238, 69.180969],
            [41.261485, 69.187618],
            [41.260006, 69.188108],
            [41.259491, 69.185189],
            [41.259202, 69.184251],
            [41.259475, 69.182738],
            [41.260536, 69.183292],
            [41.260665, 69.181609],
            [41.260938, 69.180224],
            [41.261276, 69.178498],
            [41.262112, 69.177326],
            [41.265264, 69.173937],
            [41.265590, 69.173060],
            [41.265401, 69.172754],
            [41.266003, 69.171177],
            [41.266529, 69.170508]],
            "xayrobod", '8.7'
        ),
        navbahor: createDistrictPolygon(
            [[41.278820, 69.198069],
            [41.286466, 69.205542],
            [41.282131, 69.212405],
            [41.274506, 69.204691],
            [41.278782, 69.198031]],
            "Navbahor", "5.6"
        )
    }

    for (var key in neighborhoods) {
        if (neighborhoods.hasOwnProperty(key)) {
            map.geoObjects.add(neighborhoods[key].polygon);
        }
    }
    
    // Poligon yaratish uchun yordamchi funksiya
    function createDistrictPolygon(coordinates, name, area) {
        var polygon = new ymaps.Polygon([coordinates], {
            balloonContent: `
                <div style="padding: 5px;">
                    <b class='text-uppercase'>${name}</b><br>
                    <small>Hudud: ${area}</small>                                        
                </div>
            `,
            hintContent: name
        }, {
            fillColor: '#000080',
            strokeColor: '#800000',
            strokeWidth: 1,
            fillOpacity: 0.2
        });
        
        return {
            polygon: polygon,
            name: name,
            area: area
        };
    }

    var chilonzorBorders = [
        [41.22828451770735, 69.17974875085794],
        [41.229220520389866, 69.17529091969745],
        [41.22966027564416, 69.17376206063518],
        [41.23037840171874, 69.17276427893138],
        [41.23420289541749, 69.16956708572467],
        [41.2347596068482, 69.1689769997708],
        [41.23519529079133, 69.16803286210023],
        [41.23576006189457, 69.16577980664005],
        [41.23576006190187, 69.16462109230015],
        [41.23639744057159, 69.16528628010269],
        [41.23703481302622, 69.16557595866185],
        [41.23806750459672, 69.16564033167928],
        [41.238680657480806, 69.16576907770558],
        [41.23935834608159, 69.16648790968574],
        [41.2399069460257, 69.16679904592077],
        [41.24167897167312, 69.16671573743692],
        [41.24899008459856, 69.16426327554163],
        [41.25068583341618, 69.1631626110972],
        [41.251879614132186, 69.16198977198398],
        [41.25299198107476, 69.16049214665478],
        [41.259285993460985, 69.15076660334589],
        [41.26100860229474, 69.14899832283672],
        [41.26336926275403, 69.1555604137001],
        [41.26421605234161, 69.15785102008462],
        [41.26487734708744, 69.15913848058729],
        [41.266405557434105, 69.16194407116129],
        [41.26698618735296, 69.16262535225401],
        [41.268582892985194, 69.16377333769182],
        [41.26880062254248, 69.16412738926412],
        [41.26780067339862, 69.16779665116046],
        [41.26801840556441, 69.16799513461766],
        [41.26802243763473, 69.16799513461766],
        [41.269877163594735, 69.17112259030286],
        [41.268861102869096, 69.17218474501979],
        [41.270856921478774, 69.17538730262217],
        [41.27123591852043, 69.17621342295757],
        [41.271534276360086, 69.17735067968427],
        [41.27281639313764, 69.18285993697978],
        [41.274300069175666, 69.18918458581108],
        [41.27533217175353, 69.19324545027818],
        [41.2756466372802, 69.1943451560313],
        [41.276041732816616, 69.19475821619899],
        [41.27673112848472, 69.1959115660179],
        [41.27784785343446, 69.19711319580294],
        [41.278883931291716, 69.19801978240477],
        [41.2810558313198, 69.19450572003159],
        [41.29216057085208, 69.19405053411008],
        [41.30292147162992, 69.19368638532073],
        [41.30055057822702, 69.20112108902738],
        [41.30068736289146, 69.21890368710748],
        [41.3013940790368, 69.2209975424371],
        [41.30200959976224, 69.22230240880195],
        [41.30200959976224, 69.22369831235504],
        [41.29954748200343, 69.23155785627348],
        [41.31007922301885, 69.24020638970747],
        [41.31169758669414, 69.24035811883263],
        [41.31106506209144, 69.25998801375972],
        [41.310355601502, 69.25962007179056],
        [41.310147605568474, 69.25893729287873],
        [41.30928141524495, 69.25843949809008],
        [41.307576905497726, 69.25691063902781],
        [41.30429267709042, 69.25371344587128],
        [41.30334969012798, 69.25353642004823],
        [41.30286610178761, 69.25285513893301],
        [41.30224381988155, 69.25212565261283],
        [41.30225340478353, 69.25147495337013],
        [41.30165194930966, 69.25099649808733],
        [41.30117269792767, 69.25013846819478],
        [41.30079887942156, 69.24912414299523],
        [41.300103954691224, 69.24828525130633],
        [41.29725718124607, 69.24207171189504],
        [41.29507161919173, 69.24166343005372],
        [41.29488948571497, 69.24056617260513],
        [41.29383501874932, 69.24011961434118],
        [41.29297226026907, 69.2388947687236],
        [41.2917356200291, 69.23769544081469],
        [41.28966491411592, 69.23800165219569],
        [41.287038090669725, 69.23676404780944],
        [41.28636698744881, 69.23507988521395],
        [41.28534543538795, 69.23500942139523],
        [41.28511174238037, 69.23523907993098],
        [41.284898580778375, 69.23517718144356],
        [41.28441544175085, 69.23486993092249],
        [41.28381115663907, 69.23493251898623],
        [41.282041025132926, 69.23469923617769],
        [41.28137400659504, 69.23464044132363],
        [41.28111603392923, 69.23452285162216],
        [41.280158248013485, 69.23288797537246],
        [41.2801140640968, 69.23203260507847],
        [41.279464129502486, 69.2310406789988],
        [41.27924178196721, 69.23007530542091],
        [41.27848208885381, 69.22939631970048],
        [41.277877748801, 69.22863388321704],
        [41.2755201989824, 69.22600328767273],
        [41.273233835941284, 69.22466428228117],
        [41.27175136326917, 69.22328355151662],
        [41.27021753880102, 69.22253249469472],
        [41.269399294256715, 69.22162591598506],
        [41.268874700046375, 69.2215045330674],
        [41.26820469584959, 69.22115935035545],
        [41.26670215083998, 69.22057519503944],
        [41.265852499066625, 69.2196079248451],
        [41.26527940557002, 69.21898204417592],
        [41.26512543929586, 69.21923618965977],
        [41.26441547898111, 69.21839030239262],
        [41.26291854942557, 69.21847375314812],
        [41.261772305886375, 69.21789718427392],
        [41.26047206496376, 69.21662266356807],
        [41.258997857008126, 69.21567435947827],
        [41.2577317795156, 69.21528365818884],
        [41.25628032263756, 69.21430880159373],
        [41.255641557317375, 69.21393706640487],
        [41.25403606158034, 69.21446432346397],
        [41.25323564020067, 69.2153870971996],
        [41.23636562314215, 69.18855516076857],
        [41.228289206149164, 69.17985260992957]
    ];

    var myPolygon = new ymaps.Polygon([chilonzorBorders], {}, {
        strokeColor: '#008000',
        strokeWidth: 3,
        fillOpacity: 0
    });
    
    map.geoObjects.add(myPolygon);
    
    const validLocationRegex = /^-?\d+(\.\d+)?, ?-?\d+(\.\d+)?$/;

    const crimeMarkers = data2.filter(item => validLocationRegex.test(item["Содир этилган жиноятнинг локацияси"]))
    .map(item => {
        const coords = item["Содир этилган жиноятнинг локацияси"]
        .split(',').map(coord => parseFloat(coord.trim()));
        return {
        coords: coords,
        title: `Жиноят: ${item["Ҳужжат id"]}`,
        color: "red"
        };
    });

    var clusterer = new ymaps.Clusterer({
        preset: 'islands#invertedRedClusterIcons', // markerlar guruhi uchun dizayn
        groupByCoordinates: false,
        clusterDisableClickZoom: false,
        clusterOpenBalloonOnClick: false
    });

    // Har bir marker uchun Placemark yaratish
    var placemarks = crimeMarkers.map(function (point) {
        var placemark = new ymaps.Placemark(point.coords, {
            hintContent: point.title,
            balloonContent: point.title
        }, {
            preset: point.color === "red" ? 'islands#redIcon' : 'islands#blueIcon'
        });

        // 🔍 Markerga klik qilinganda fokuslash
        placemark.events.add('click', function () {
            map.setCenter(point.coords, 20, {
                checkZoomRange: true
            });
        });

        return placemark;
    });

    // Markerlarni klasterga qo‘shish
    clusterer.add(placemarks);
    map.geoObjects.add(clusterer);
}
