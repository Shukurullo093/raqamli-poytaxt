ymaps.ready(init);
            
function init() {
    var map = new ymaps.Map("map", {
        center: [41.27060103232188, 69.20635608472475], // Chilonzor centre
        zoom: 12,
        controls: ['fullscreenControl']
    });

    // Guruhlash
    const counts = {};

    data2.forEach(item => {
        const key = item["махалла"];
        counts[key] = (counts[key] || 0) + 1;
    });

    // 3. Ranglarni belgilash
    const getColor = (count) => {
        if (count <= 10) return "#00ff00";
        if (count > 10 && count < 50) return "#ffff00";
        return "#ff0000";
    };

    // Saralash va qayta lug‘at qilish
    const sorted = Object.entries(counts)
        .sort((a, b) => b[1] - a[1])
        .reduce((acc, [key, value]) => {
            acc[key] = {
                count: value,
                color: getColor(value)
            };
            return acc;
    }, {});

    function findColorByText(text) {
        for (const mahalla in sorted) {            
            if (mahalla.toLowerCase().includes(text)) {
                return sorted[mahalla].color;
            }
        }
        return "#ffffff";
    }

    // console.log(sorted);

    var neighborhoods = {
        al_xorazmiy: createDistrictPolygon(
            [[41.263111, 69.154577],
            [41.262172, 69.154942],
            [41.260505, 69.155575],
            [41.260246, 69.154480],
            [41.260254, 69.154255],
            [41.259485, 69.152818],
            [41.260318, 69.151712],
            [41.259412, 69.150414],
            [41.260691, 69.149620],
            [41.261492, 69.150071],
            [41.262019, 69.151616],
            [41.262440, 69.152818],
            [41.262998, 69.154556]],
            "Al-Xorazmiy", "12.34"
        ),
        katta_xirmontepa: createDistrictPolygon(
            [[41.271467, 69.177231],
            [41.270593, 69.178057],
            [41.269872, 69.178744],
            [41.269370, 69.179484],
            [41.268286, 69.181243],
            [41.268156, 69.181222],
            [41.268043, 69.181077],
            [41.267294, 69.180385],
            [41.267500, 69.180069],
            [41.267051, 69.179344],
            [41.266671, 69.178685],
            [41.266165, 69.177837],
            [41.265554, 69.176737],
            [41.266051, 69.175831],
            [41.266816, 69.174527],
            [41.267067, 69.174157],
            [41.267905, 69.173245],
            [41.268860, 69.172199],
            [41.270985, 69.175654],
            [41.271167, 69.176075],
            [41.271335, 69.176761],
            [41.271458, 69.177227],],
            "Katta Xirmontepa", "22.3"
        ) ,
        qizil_sharq: createDistrictPolygon(
            [[41.268786, 69.164141],
            [41.268580, 69.164860],
            [41.268341, 69.165745],
            [41.268065, 69.166729],
            [41.267709, 69.168016],
            [41.267580, 69.168499],
            [41.267434, 69.168880],
            [41.267175, 69.169293],
            [41.267001, 69.169373],
            [41.265945, 69.168263],
            [41.263601, 69.165731],
            [41.265225, 69.163120],
            [41.265225, 69.163120],
            [41.265477, 69.163428],
            [41.265787, 69.162908],
            [41.266014, 69.162792],
            [41.266329, 69.162674],
            [41.266689, 69.162267],
            [41.267046, 69.162642],
            [41.267515, 69.163028],
            [41.268094, 69.163458],
            [41.268094, 69.163458],
            [41.268690, 69.163939],
            [41.268770, 69.164136],],
            "Qizil-Sharq", "2.3"
        ),
        sharq_tongi: createDistrictPolygon(
            [[41.267794, 69.167795],
            [41.267988, 69.167988],
            [41.268847, 69.169415],
            [41.269842, 69.171164],
            [41.268126, 69.172988],
            [41.266548, 69.170520],
            [41.266046, 69.171131],
            [41.265406, 69.172784],
            [41.261561, 69.169007],
            [41.261188, 69.168717],
            [41.260662, 69.168578],
            [41.260784, 69.166389],
            [41.260826, 69.166220],
            [41.261039, 69.165815],
            [41.262128, 69.164083],
            [41.264580, 69.166733],
            [41.266993, 69.169383],
            [41.266993, 69.169383],
            [41.267794, 69.167800],
            [41.268009, 69.168015],],
            "Sharq tongi", "0.9"
        ),
        sharaf: createDistrictPolygon(
            [[41.265478, 69.160267],
            [41.266220, 69.161626],
            [41.266435, 69.161978],
            [41.266682, 69.162280],
            [41.266309, 69.162679],
            [41.265773, 69.162929],
            [41.265487, 69.163419],
            [41.265302, 69.163248],
            [41.265228, 69.163119],
            [41.263603, 69.165732],
            [41.262112, 69.164110],
            [41.263153, 69.162368],
            [41.263443, 69.161990],
            [41.263823, 69.161661],
            [41.264534, 69.161042],
            [41.265462, 69.160267]],
            "sharaf", '0.6'
        ),
        qozirobod: createDistrictPolygon(
            [[41.274508, 69.204789],
            [41.278102, 69.207879],
            [41.282165, 69.212385],
            [41.273990, 69.225303],
            [41.273213, 69.224552],
            [41.272849, 69.224380],
            [41.272428, 69.223833],
            [41.271975, 69.223393],
            [41.271805, 69.223253],
            [41.270704, 69.222846],
            [41.269919, 69.222277],
            [41.269496, 69.221751],
            [41.269062, 69.221740],
            [41.268688, 69.221354],
            [41.268162, 69.221089],
            [41.267183, 69.220893],
            [41.266616, 69.220518],
            [41.266001, 69.219788],
            [41.266098, 69.219348],
            [41.265467, 69.218667],
            [41.274484, 69.204701]],
            "Qozirobod", '8.6'
        ),
        gavhar: createDistrictPolygon(
            [[41.270166, 69.211441],
            [41.265478, 69.218638],
            [41.265136, 69.218270],
            [41.263662, 69.218553],
            [41.262359, 69.218213],
            [41.259516, 69.216104],
            [41.259257, 69.213915],
            [41.260731, 69.212113],
            [41.263419, 69.212671],
            [41.263710, 69.210032],
            [41.262933, 69.208701],
            [41.263532, 69.206985],
            [41.263532, 69.206985],
            [41.270108, 69.211291]],
            "gavxar", '5.6'
        ),
        dombirobod: createDistrictPolygon(
            [[41.254432, 69.203777],
            [41.260245, 69.205300],
            [41.263515, 69.207017],
            [41.262965, 69.208733],
            [41.263758, 69.210064],
            [41.263402, 69.212724],
            [41.260682, 69.212145],
            [41.259241, 69.213862],
            [41.258480, 69.211888],
            [41.255225, 69.206309],
            [41.254626, 69.204914],
            [41.254399, 69.203820]],
            "Do'mbirobod", '4.5'
        ),
        katta_dombirobod: createDistrictPolygon(
            [[41.254407, 69.195607],
            [41.258391, 69.195757],
            [41.259022, 69.195886],
            [41.260560, 69.196680],
            [41.259897, 69.198418],
            [41.266616, 69.202323],
            [41.269125, 69.206786],
            [41.269489, 69.207097],
            [41.270582, 69.207194],
            [41.271926, 69.208696],
            [41.270200, 69.211374],
            [41.265871, 69.208567],
            [41.263523, 69.207108],
            [41.263523, 69.207108],
            [41.255363, 69.204168],
            [41.254440, 69.203868],
            [41.254262, 69.202259],
            [41.254379, 69.195714]],
            "katta do'mbirobod", '4.7'
        ),
        naqqoshlik: createDistrictPolygon(
            [[41.259899, 69.198370],
            [41.260537, 69.196750],
            [41.264427, 69.198856],
            [41.269447, 69.201577],
            [41.272921, 69.203513],
            [41.274507, 69.204652],
            [41.271904, 69.208682],
            [41.270698, 69.207385],
            [41.269335, 69.207084],
            [41.268321, 69.205415],
            [41.266956, 69.202729],
            [41.266575, 69.202330],
            [41.260011, 69.198606]],
            "Naqqoshlik", '3.5'
        ),
        mevazor: createDistrictPolygon(
            [[41.269162, 69.192983],
            [41.268994, 69.193799],
            [41.267876, 69.193343],
            [41.267438, 69.194546],
            [41.266985, 69.194525],
            [41.267000, 69.195447],
            [41.266868, 69.195862],
            [41.267104, 69.196001],
            [41.266844, 69.196781],
            [41.266776, 69.196751],
            [41.266296, 69.198275],
            [41.266363, 69.198787],
            [41.266040, 69.199721],
            [41.262903, 69.198030],
            [41.263155, 69.197114],
            [41.263099, 69.196997],
            [41.263150, 69.196409],
            [41.262846, 69.195992],
            [41.262524, 69.195146],
            [41.262487, 69.194867],
            [41.263035, 69.193799],
            [41.263008, 69.193408],
            [41.262671, 69.192759],
            [41.263846, 69.189715],
            [41.268005, 69.192473],
            [41.269128, 69.192963]],
            "Mevazor", '6.7'
        ),
        borijar: createDistrictPolygon(
            [[41.270645, 69.192098],
            [41.270446, 69.192392],
            [41.270201, 69.193368],
            [41.267980, 69.192469],
            [41.262533, 69.188798],
            [41.261541, 69.188863],
            [41.261249, 69.189240],
            [41.261127, 69.189082],
            [41.261089, 69.188542],
            [41.260916, 69.187728],
            [41.261292, 69.187623],
            [41.262577, 69.187585],
            [41.264594, 69.188630],
            [41.266970, 69.189943],
            [41.270633, 69.192040]],
            "Bo'rijar", '5.6'
        ),
        shuhrat: createDistrictPolygon(
            [[41.267720, 69.182608],
            [41.268427, 69.183913],
            [41.268759, 69.183852],
            [41.269963, 69.182589],
            [41.270925, 69.184439],
            [41.269871, 69.185485],
            [41.270042, 69.185800],
            [41.268776, 69.187129],
            [41.268313, 69.188623],
            [41.268280, 69.188947],
            [41.267843, 69.190450],
            [41.264811, 69.188716],
            [41.265674, 69.186028],
            [41.266077, 69.185284],
            [41.266722, 69.184428],
            [41.267426, 69.183506],
            [41.267681, 69.182675]],
            "shuxrat", '5.7'
        ),
        yakkatut: createDistrictPolygon(
            [[41.265574, 69.176634],
            [41.267525, 69.180067],
            [41.267330, 69.180389],
            [41.268035, 69.181075],
            [41.268136, 69.181086],
            [41.268272, 69.181250],
            [41.268124, 69.181494],
            [41.267857, 69.182159],
            [41.267703, 69.182609],
            [41.267581, 69.183103],
            [41.267411, 69.183521],
            [41.266116, 69.185227],
            [41.265833, 69.185667],
            [41.265606, 69.186182],
            [41.264821, 69.188725],
            [41.264371, 69.188555],
            [41.262647, 69.187600],
            [41.261469, 69.187611],
            [41.263137, 69.181376],
            [41.263437, 69.180603],
            [41.265548, 69.176733]],
            "Yakkatut", '4.6'
        ),
        kichik_xirmontepa: createDistrictPolygon(
            [[41.272783, 69.182889],
            [41.273883, 69.187590],
            [41.271441, 69.189964],
            [41.270844, 69.191776],
            [41.270685, 69.192043],
            [41.267843, 69.190422],
            [41.268290, 69.188935],
            [41.268325, 69.188582],
            [41.268707, 69.187256],
            [41.268866, 69.187002],
            [41.270041, 69.185807],
            [41.269869, 69.185482],
            [41.272459, 69.183051],
            [41.272523, 69.182999],
            [41.272632, 69.182944],
            [41.272784, 69.182865]],
            "Kichik xirmontepa", '4.6'
        ),
        xontopi: createDistrictPolygon(
            [[41.260644, 69.168594],
            [41.261178, 69.168723],
            [41.261567, 69.168959],
            [41.265202, 69.172553],
            [41.265604, 69.173060],
            [41.265402, 69.173661],
            [41.265167, 69.174036],
            [41.264884, 69.174369],
            [41.264746, 69.174465],
            [41.264066, 69.175323],
            [41.262155, 69.177276],
            [41.261411, 69.178328],
            [41.261354, 69.178446],
            [41.261184, 69.179250],
            [41.261095, 69.179540],
            [41.260990, 69.180001],
            [41.260674, 69.181739],
            [41.260536, 69.182834],
            [41.260496, 69.183349],
            [41.259427, 69.182823],
            [41.259929, 69.180312],
            [41.260034, 69.179583],
            [41.260399, 69.173306],
            [41.260632, 69.168555]],
            "Xonto'pi", '6.8'
        ),
        beshqorgon: createDistrictPolygon(
            [[41.253175, 69.159924],
            [41.254361, 69.161039],
            [41.253825, 69.167476],
            [41.254197, 69.167640],
            [41.253970, 69.170622],
            [41.253280, 69.170573],
            [41.253150, 69.176685],
            [41.253290, 69.178575],
            [41.254629, 69.182884],
            [41.254747, 69.185310],
            [41.254573, 69.185732],
            [41.254051, 69.185502],
            [41.252689, 69.186962],
            [41.250370, 69.183351],
            [41.240948, 69.193453],
            [41.240455, 69.194375],
            [41.236241, 69.187911],
            [41.222569, 69.174521],
            [41.225171, 69.171936],
            [41.226145, 69.171797],
            [41.227151, 69.173867],
            [41.227440, 69.173749],
            [41.228310, 69.174088],
            [41.230547, 69.172192],
            [41.234807, 69.168694],
            [41.235732, 69.165753],
            [41.235578, 69.164790],
            [41.235871, 69.164561],
            [41.236724, 69.165471],
            [41.236724, 69.165471],
            [41.239888, 69.166664],
            [41.239888, 69.166664],
            [41.249848, 69.163505],
            [41.249848, 69.163505],
            [41.253330, 69.159727]],
            "Beshqo'rg'on", '6.9'
        ),
        yakkabog: createDistrictPolygon(
            [[41.263891, 69.189697],
            [41.262708, 69.192739],
            [41.263045, 69.193448],
            [41.263024, 69.193872],
            [41.262560, 69.194665],
            [41.262498, 69.195021],
            [41.262880, 69.195978],
            [41.263126, 69.196376],
            [41.263104, 69.196871],
            [41.263171, 69.197137],
            [41.262904, 69.198020],
            [41.259037, 69.195935],
            [41.254396, 69.195723],
            [41.254356, 69.191428],
            [41.253836, 69.188831],
            [41.252689, 69.186904],
            [41.254001, 69.185502],
            [41.254433, 69.185557],
            [41.259090, 69.188477],
            [41.259352, 69.188412],
            [41.260950, 69.187700],
            [41.261138, 69.188621],
            [41.261138, 69.189073],
            [41.261233, 69.189231],
            [41.261539, 69.188826],
            [41.262457, 69.188788],
            [41.263804, 69.189707]],
            "Yakkabog'", '6.5'
        ),
        qatortol_2: createDistrictPolygon(
            [[41.267876, 69.193336],
            [41.268975, 69.193776],
            [41.269158, 69.192957],
            [41.270223, 69.193367],
            [41.268311, 69.200953],
            [41.266056, 69.199709],
            [41.266353, 69.198768],
            [41.266296, 69.198237],
            [41.266765, 69.196765],
            [41.266847, 69.196789],
            [41.267106, 69.195995],
            [41.266872, 69.195849],
            [41.267016, 69.195413],
            [41.266967, 69.194562],
            [41.267420, 69.194555],
            [41.267857, 69.193355]],
            "2-qatortol", '5.6'
        ),
        guliston: createDistrictPolygon(
            [[41.257862, 69.159576],
            [41.260193, 69.155819],
            [41.260776, 69.155418],
            [41.263050, 69.154665],
            [41.263863, 69.156849],
            [41.263489, 69.157078],
            [41.262964, 69.157946],
            [41.262532, 69.158012],
            [41.262367, 69.158155],
            [41.261956, 69.158937],
            [41.262014, 69.159176],
            [41.261777, 69.159719],
            [41.261875, 69.159845],
            [41.261625, 69.160229],
            [41.261544, 69.160162],
            [41.261400, 69.160436],
            [41.261378, 69.160557],
            [41.261497, 69.161254],
            [41.261246, 69.161457],
            [41.260589, 69.162499],
            [41.257811, 69.159578]],
            "Guliston", '4.5'
        ),
        bahoriston: createDistrictPolygon(
            [[41.263886, 69.156831],
            [41.264211, 69.157839],
            [41.265476, 69.160254],
            [41.263468, 69.161978],
            [41.263178, 69.162316],
            [41.262121, 69.164101],
            [41.260600, 69.162501],
            [41.261260, 69.161448],
            [41.261507, 69.161264],
            [41.261387, 69.160498],
            [41.261542, 69.160157],
            [41.261628, 69.160238],
            [41.261873, 69.159842],
            [41.261764, 69.159706],
            [41.262021, 69.159192],
            [41.261958, 69.158931],
            [41.262398, 69.158123],
            [41.262554, 69.157992],
            [41.262955, 69.157946],
            [41.263470, 69.157105],
            [41.263850, 69.156859]],
            "Baxoriston", '5.6'
        ),
        xirmontepa: createDistrictPolygon(
            [[41.271463, 69.177215],
            [41.272803, 69.182835],
            [41.272517, 69.183001],
            [41.270932, 69.184448],
            [41.269959, 69.182599],
            [41.268761, 69.183851],
            [41.268441, 69.183925],
            [41.267691, 69.182600],
            [41.267795, 69.182189],
            [41.268124, 69.181502],
            [41.268124, 69.181502],
            [41.269830, 69.178781],
            [41.270512, 69.178119],
            [41.271446, 69.177223]],
            "Xirmontepa", '7.6'
        ),
        beshyogoch: createDistrictPolygon(
            [[41.299650, 69.231459],
            [41.306510, 69.237188],
            [41.310296, 69.240151],
            [41.311896, 69.240371],
            [41.311820, 69.242633],
            [41.311337, 69.242894],
            [41.309496, 69.242733],
            [41.309179, 69.242834],
            [41.305254, 69.246457],
            [41.305254, 69.246457],
            [41.310628, 69.246397],
            [41.310643, 69.245997],
            [41.311625, 69.246123],
            [41.311112, 69.259958],
            [41.310542, 69.259731],
            [41.310089, 69.258966],
            [41.309140, 69.258364],
            [41.304376, 69.253660],
            [41.303428, 69.253550],
            [41.302442, 69.252525],
            [41.302251, 69.251559],
            [41.301817, 69.251099],
            [41.301210, 69.249996],
            [41.300968, 69.249421],
            // [41.303101, 69.246063],
            [41.297620, 69.243050],
            [41.297395, 69.241946],
            [41.297568, 69.239509],
            [41.298611, 69.234573],
            [41.299661, 69.231413]],
            "beshyog'och", '5.7'
        ),
        katta_olmazor: createDistrictPolygon(
            [[41.305261, 69.246428],
            [41.309249, 69.242764],
            [41.309575, 69.242748],
            [41.311387, 69.242897],
            [41.311778, 69.242700],
            [41.311643, 69.246122],
            [41.310650, 69.246024],
            [41.310657, 69.245988],
            [41.310630, 69.246445],
            [41.309625, 69.246387],
            [41.307468, 69.246521],
            [41.305799, 69.246521],
            [41.305258, 69.246429]],
            "katta olmazor", '6.7'
        ),
        novza: createDistrictPolygon(
            [[41.282143, 69.212442],
            [41.295551, 69.227304],
            [41.294753, 69.228581],
            [41.294783, 69.228659],
            [41.294666, 69.228873],
            [41.294496, 69.228689],
            [41.293791, 69.229871],
            [41.293783, 69.230074],
            [41.293528, 69.230198],
            [41.293417, 69.229466],
            [41.293078, 69.229612],
            [41.293052, 69.229421],
            [41.292823, 69.229241],
            [41.292687, 69.228847],
            [41.292644, 69.228464],
            [41.292491, 69.228317],
            [41.292313, 69.228115],
            [41.291803, 69.226966],
            [41.291769, 69.226752],
            [41.291693, 69.226605],
            [41.291226, 69.226696],
            [41.291081, 69.226313],
            [41.291007, 69.226274],
            [41.290768, 69.226561],
            [41.290317, 69.226113],
            [41.289830, 69.225614],
            [41.289636, 69.225689],
            [41.289254, 69.225705],
            [41.289129, 69.225423],
            [41.288528, 69.224784],
            [41.288396, 69.224444],
            [41.288132, 69.224274],
            [41.287907, 69.223783],
            [41.287611, 69.222680],
            [41.287341, 69.222185],
            [41.287393, 69.221690],
            [41.286942, 69.220956],
            [41.286929, 69.220154],
            [41.285886, 69.219113],
            [41.285143, 69.219025],
            [41.284440, 69.218843],
            [41.283933, 69.218378],
            [41.282391, 69.219154],
            [41.282059, 69.219025],
            [41.281864, 69.219180],
            [41.281064, 69.219076],
            [41.280808, 69.218217],
            [41.280539, 69.218306],
            [41.279889, 69.217919],
            [41.279138, 69.217221],
            [41.282124, 69.212416]],
            'novza', '4.7'
        ),
        mehrjon: createDistrictPolygon(
            [[41.270695, 69.192036],
            [41.270839, 69.191774],
            [41.271436, 69.190000],
            [41.273618, 69.187804],
            [41.273910, 69.187595],
            [41.275262, 69.193429],
            [41.275639, 69.194149],
            [41.275415, 69.194542],
            [41.275244, 69.194821],
            [41.274579, 69.194351],
            [41.273762, 69.193851],
            [41.270718, 69.192078]],
            'mexrjon', '5.9'
        ),
        botirma: createDistrictPolygon(
            [[41.270503, 69.192328],
            [41.270703, 69.192064],
            [41.273307, 69.193575],
            [41.275280, 69.194821],
            [41.275223, 69.195163],
            [41.275300, 69.195274],
            [41.275182, 69.195476],
            [41.275077, 69.195891],
            [41.274271, 69.196987],
            [41.273889, 69.197420],
            [41.272666, 69.198360],
            [41.271985, 69.199087],
            [41.271186, 69.200110],
            [41.270685, 69.200782],
            [41.270630, 69.200948],
            [41.270414, 69.202090],
            [41.268322, 69.200976],
            [41.270474, 69.192360]],
            'botirma', '5.7'
        ),
        fidokor: createDistrictPolygon(
            [[41.275693, 69.194160],
            [41.276620, 69.195828],
            [41.277113, 69.196404],
            [41.278847, 69.198175],
            [41.276121, 69.202170],
            [41.274960, 69.200718],
            [41.275235, 69.200237],
            [41.275082, 69.200015],
            [41.275159, 69.199903],
            [41.274857, 69.199520],
            [41.274716, 69.199687],
            [41.273354, 69.197856],
            [41.273855, 69.197439],
            [41.274602, 69.196605],
            [41.275103, 69.195850],
            [41.275162, 69.195472],
            [41.275302, 69.195276],
            [41.275232, 69.195183],
            [41.275232, 69.194831],
            [41.275372, 69.194568],
            [41.275667, 69.194169]],
            'fidokor', '7.8'
        ),
        zarqorgon: createDistrictPolygon(
            [[41.273334, 69.197818],
            [41.274718, 69.199680],
            [41.274854, 69.199508],
            [41.275154, 69.199909],
            [41.275084, 69.200010],
            [41.275240, 69.200243],
            [41.274971, 69.200718],
            [41.276113, 69.202181],
            [41.274491, 69.204717],
            [41.273419, 69.203848],
            [41.272832, 69.203456],
            [41.270402, 69.202103],
            [41.270612, 69.200965],
            [41.270648, 69.200840],
            [41.270729, 69.200725],
            [41.271116, 69.200196],
            [41.271681, 69.199425],
            [41.272138, 69.198894],
            [41.272587, 69.198449],
            [41.273022, 69.198076],
            [41.273324, 69.197836]],
            "Zarqo'rg'on", '9.7'
        ),
        beshchinor: createDistrictPolygon(
            [[41.285693, 69.216295],
            [41.286345, 69.215380],
            [41.286281, 69.215314],
            [41.286782, 69.214654],
            [41.287311, 69.214173],
            [41.287895, 69.213890],
            [41.289516, 69.213380],
            [41.290079, 69.213108],
            [41.290680, 69.212701],
            [41.291613, 69.211210],
            [41.296420, 69.216482],
            [41.292042, 69.223364],
            [41.285702, 69.216389]],
            "Beshchinor", '4.7'
        ),
        charx_kamolon_1: createDistrictPolygon(
            [[41.295564, 69.227369],
            [41.299665, 69.231416],
            [41.298586, 69.234611],
            [41.297921, 69.237711],
            [41.297432, 69.240399],
            [41.297358, 69.241988],
            [41.295894, 69.241968],
            [41.295390, 69.241713],
            [41.295006, 69.241380],
            [41.294902, 69.240791],
            [41.294784, 69.240497],
            [41.295524, 69.239281],
            [41.295982, 69.239144],
            [41.296268, 69.239338],
            [41.296474, 69.239229],
            [41.296941, 69.238013],
            [41.296379, 69.237456],
            [41.296894, 69.236541],
            [41.296395, 69.235354],
            [41.295673, 69.234902],
            [41.295420, 69.233998],
            [41.295206, 69.233715],
            [41.294984, 69.232916],
            [41.294374, 69.232012],
            [41.294057, 69.231960],
            [41.293867, 69.232107],
            [41.293819, 69.231792],
            [41.293660, 69.231697],
            [41.293391, 69.231781],
            [41.293233, 69.231550],
            [41.293185, 69.231298],
            [41.293042, 69.231014],
            [41.293084, 69.230888],
            [41.293258, 69.230840],
            [41.293403, 69.230641],
            [41.293320, 69.230398],
            [41.293207, 69.230186],
            [41.293082, 69.229617],
            [41.293423, 69.229470],
            [41.293542, 69.230174],
            [41.293779, 69.230070],
            [41.293820, 69.229804],
            [41.294517, 69.228701],
            [41.294671, 69.228892],
            [41.294787, 69.228662],
            [41.294758, 69.228573],
            [41.295551, 69.227311]],
            "1-Charx kamolon", '9.7'
        ),
        kotarma: createDistrictPolygon(
            [[41.278790, 69.198055],
            [41.280924, 69.194699],
            [41.286769, 69.194472],
            [41.286769, 69.194472],
            [41.278793, 69.198030]],
            "ko'tarma", '9.7'
        ),
        kotarma: createDistrictPolygon(
            [[41.286209, 69.195899],
            [41.288609, 69.195871],
            [41.288653, 69.197908],
            [41.289958, 69.197880],
            [41.290032, 69.199618],
            [41.290148, 69.199757],
            [41.290345, 69.199800],
            [41.290426, 69.199870],
            [41.290651, 69.200409],
            [41.289350, 69.201498],
            [41.288283, 69.202729],
            [41.286463, 69.205573],
            [41.283589, 69.202750],
            [41.286197, 69.195904]],
            "Ko'tarma", '9.9'
        ),
        lutfiy: createDistrictPolygon(
            [[41.292141, 69.194228],
            [41.302829, 69.193855],
            [41.301717, 69.197398],
            [41.301781, 69.197856],
            [41.301244, 69.199534],
            [41.300963, 69.199687],
            [41.300746, 69.200365],
            [41.300567, 69.201128],
            [41.300797, 69.210706],
            [41.300004, 69.210706],
            [41.292110, 69.194281]],
            'lutfiy', '0.8'
        ),
        bogzor: createDistrictPolygon(
            [[41.296090, 69.202423],
            [41.299409, 69.209420],
            [41.298280, 69.210328],
            [41.297502, 69.210328],
            [41.297502, 69.210101],
            [41.296142, 69.210135],
            [41.296099, 69.211280],
            [41.294833, 69.211314],
            [41.294688, 69.211269],
            [41.295201, 69.205655],
            [41.295834, 69.202650],
            [41.296081, 69.202390]],
            "Bog'zor", '7.8'
        ),
        oq_tepa: createDistrictPolygon(
            [[41.299425, 69.209433],
            [41.300014, 69.210733],
            [41.296378, 69.216498],
            [41.293607, 69.213433],
            [41.294222, 69.212412],
            [41.294533, 69.211748],
            [41.294693, 69.211240],
            [41.294956, 69.211320],
            [41.296117, 69.211273],
            [41.296122, 69.210148],
            [41.297486, 69.210115],
            [41.297486, 69.210115],
            [41.298269, 69.210329],
            [41.299396, 69.209426]],
            "Oq-tepa", '9.6'
        ),
        nafosat: createDistrictPolygon(
            [[41.293902, 69.197763],
            [41.295413, 69.200962],
            [41.292776, 69.203240],
            [41.292208, 69.210016],
            [41.291619, 69.211270],
            [41.288065, 69.207325],
            [41.287560, 69.207241],
            [41.287276, 69.206990],
            [41.286750, 69.206000],
            [41.286456, 69.205568],
            [41.288317, 69.202710],
            [41.289526, 69.201358],
            [41.291125, 69.200047],
            [41.293882, 69.197801]],
            "Nafosat", '7.6'
        ),
        dilobod: createDistrictPolygon(
            [[41.286450, 69.205540],
            [41.286754, 69.205977],
            [41.287179, 69.206793],
            [41.287413, 69.207150],
            [41.288037, 69.207339],
            [41.289052, 69.208461],
            [41.291599, 69.211241],
            [41.290710, 69.212630],
            [41.290452, 69.212897],
            [41.289998, 69.213249],
            [41.289046, 69.213541],
            [41.288169, 69.213758],
            [41.287715, 69.213967],
            [41.287289, 69.212262],
            [41.286558, 69.212279],
            [41.286583, 69.211560],
            [41.286795, 69.211005],
            [41.285913, 69.210415],
            [41.285667, 69.210410],
            [41.285114, 69.209902],
            [41.284332, 69.208954],
            [41.286462, 69.205571]],
            "Dilobod", "5.4"
        ),
        xalqlar_dostligi: createDistrictPolygon(
            [[41.284343, 69.208983],
            [41.285083, 69.209885],
            [41.285661, 69.210408],
            [41.285921, 69.210424],
            [41.286785, 69.211010],
            [41.286583, 69.211566],
            [41.286542, 69.212289],
            [41.287295, 69.212269],
            [41.287719, 69.213964],
            [41.287340, 69.214146],
            [41.286787, 69.214650],
            [41.286282, 69.215352],
            [41.286340, 69.215406],
            [41.285696, 69.216375],
            [41.282122, 69.212425],
            [41.284327, 69.208953]],
            "Xalqlar do'stligi", '8.7'
        ),
        qatortol_1: createDistrictPolygon(
            [[41.295434, 69.200991],
            [41.296084, 69.202397],
            [41.295876, 69.202593],
            [41.295205, 69.205538],
            [41.294736, 69.210983],
            [41.294655, 69.211393],
            [41.294561, 69.211713],
            [41.294306, 69.212256],
            [41.293581, 69.213412],
            [41.291609, 69.211241],
            [41.292105, 69.210387],
            [41.292213, 69.209916],
            [41.292763, 69.203260],
            [41.293045, 69.202940],
            [41.295409, 69.200960]],
            "Qatortol 1", '8.7'
        ),
        xayrobod: createDistrictPolygon(
            [[41.266630, 69.170549],
            [41.268158, 69.173000],
            [41.266952, 69.174364],
            [41.263238, 69.180969],
            [41.261485, 69.187618],
            [41.260006, 69.188108],
            [41.259491, 69.185189],
            [41.259202, 69.184251],
            [41.259475, 69.182738],
            [41.260536, 69.183292],
            [41.260665, 69.181609],
            [41.260938, 69.180224],
            [41.261276, 69.178498],
            [41.262112, 69.177326],
            [41.265264, 69.173937],
            [41.265590, 69.173060],
            [41.265401, 69.172754],
            [41.266003, 69.171177],
            [41.266529, 69.170508]],
            "xayrobod", '8.7'
        ),
        navbahor: createDistrictPolygon(
            [[41.278820, 69.198069],
            [41.286466, 69.205542],
            [41.282131, 69.212405],
            [41.274506, 69.204691],
            [41.278782, 69.198031]],
            "Navbahor", "5.6"
        ),
        charx_kamolon_2: createDistrictPolygon(
            [[41.293706, 69.22081],
            [41.294742, 69.221974],
            [41.294831, 69.222017],
            [41.294823, 69.222210],
            [41.296263, 69.222703],
            [41.297299, 69.223454],
            [41.297408, 69.223468],
            [41.297416, 69.222810],
            [41.302255, 69.222617],
            [41.302303, 69.223325],
            [41.302157, 69.224012],
            [41.299666, 69.231436],
            [41.292076, 69.223368],
            [41.293656, 69.220785]],
            "2-Charx kamolon", '5.6'
        ),
        charx_kamolon_3: createDistrictPolygon(
            [[41.300780, 69.210582],
            [41.301039, 69.219315],
            [41.301120, 69.219916],
            [41.301383, 69.220522],
            [41.302071, 69.221874],
            [41.302176, 69.222244],
            [41.302245, 69.222609],
            [41.297415, 69.222802],
            [41.297398, 69.223456],
            [41.296541, 69.222974],
            [41.296209, 69.222695],
            [41.294825, 69.222201],
            [41.294705, 69.221948],
            [41.293684, 69.220753],
            [41.300028, 69.210689],
            [41.300758, 69.210700]],
            "3-charx kamolon", '7.6'
        ),
        katta_chilonzor_1: createDistrictPolygon(
            [[41.283375, 69.223950],
            [41.288230, 69.229358],
            [41.284799, 69.234894],
            [41.283945, 69.234829],
            [41.283602, 69.234867],
            [41.282974, 69.234701],
            [41.282590, 69.234770],
            [41.282256, 69.234741],
            [41.281914, 69.234642],
            [41.281534, 69.234647],
            [41.281230, 69.234550],
            [41.281089, 69.234395],
            [41.280915, 69.234073],
            [41.280631, 69.233590],
            [41.280559, 69.233354],
            [41.280259, 69.233011],
            [41.280186, 69.232861],
            [41.280113, 69.232625],
            [41.280121, 69.232287],
            [41.280093, 69.232088],
            [41.279741, 69.231536],
            [41.279555, 69.231310],
            [41.279450, 69.231149],
            [41.279373, 69.230861],
            // [41.283558, 69.230302],
            [41.279648, 69.230251],
            [41.279587, 69.229961],
            [41.279688, 69.229894],
            [41.280008, 69.229384],
            [41.279990, 69.228749], // 41.279373, 69.230861
            [41.280559, 69.227743],
            [41.280811, 69.228019],
            [41.283368, 69.223976]],
            "katta chilonzor-1", '6.5'
        ),
        katta_chilonzor_2: createDistrictPolygon(
            [[41.278852, 69.217613],
            [41.282802, 69.223277],
            [41.283344, 69.223964],
            [41.280811, 69.228020],
            [41.280568, 69.227741],
            [41.280010, 69.228760],
            [41.280010, 69.229382],
            [41.279686, 69.229886],
            [41.279593, 69.229940],
            [41.279650, 69.230248],
            [41.279354, 69.230809],
            [41.279225, 69.230214],
            [41.279225, 69.230214],
            [41.278905, 69.229731],
            [41.278334, 69.229269],
            [41.275607, 69.225986],
            [41.275360, 69.225820],
            [41.274725, 69.225616],
            [41.274053, 69.225262],
            [41.278790, 69.217701]],
            'katta chilonzor-2', '5.6'
        ),
        katta_chilonzor_3: createDistrictPolygon(
            [[41.278854, 69.217673],
            [41.279129, 69.217179],
            [41.279639, 69.217780],
            [41.279829, 69.217844],
            [41.280011, 69.218037],
            [41.280485, 69.218316],
            [41.280537, 69.218330],
            [41.280740, 69.218209],
            [41.280818, 69.218230],
            [41.280879, 69.218389],
            [41.280974, 69.219003],
            [41.281055, 69.219059],
            [41.281411, 69.219075],
            [41.281824, 69.219191],
            [41.281901, 69.219140],
            [41.281996, 69.219051],
            [41.282299, 69.219191],
            [41.282641, 69.219067],
            [41.283511, 69.218450],
            [41.283791, 69.218370],
            [41.283920, 69.218391],
            [41.284458, 69.218853],
            [41.284960, 69.219003],
            [41.285063, 69.219062],
            [41.285616, 69.219035],
            [41.285842, 69.219067],
            [41.286623, 69.219749],
            [41.286627, 69.219775],
            [41.286927, 69.220210],
            [41.286991, 69.220478],
            [41.286991, 69.220677],
            [41.286898, 69.220838],
            [41.286882, 69.220939],
            [41.287396, 69.221597],
            [41.287347, 69.222079],
            [41.287380, 69.222423],
            [41.287614, 69.222675],
            [41.287813, 69.223340],
            [41.287878, 69.223769],
            [41.288132, 69.224289],
            [41.288428, 69.224496],
            [41.288561, 69.224780],
            [41.289132, 69.225408],
            [41.289237, 69.225708],
            [41.289581, 69.225698],
            [41.289840, 69.225596],
            [41.290305, 69.226116],
            [41.288236, 69.229379],
            [41.283240, 69.223809],
            [41.278797, 69.217715]],
            "katta chilonzor-3", '7.6'
        ),
        chilonzor: createDistrictPolygon(
            [[41.284778, 69.234830],
            [41.290345, 69.226076],
            [41.290766, 69.226559],
            [41.290981, 69.226280],
            [41.291088, 69.226304],
            [41.291159, 69.226601],
            [41.291238, 69.226695],
            [41.291652, 69.226596],
            [41.291796, 69.226650],
            [41.291822, 69.226779],
            [41.291790, 69.226945],
            [41.291814, 69.227068],
            [41.292288, 69.228082],
            [41.292474, 69.228323],
            [41.292636, 69.228447],
            [41.292749, 69.229064],
            [41.292858, 69.229316],
            [41.293028, 69.229429],
            [41.293226, 69.230185],
            [41.293396, 69.230560],
            [41.293299, 69.230829],
            [41.293121, 69.230839], // 
            [41.293048, 69.231011],
            [41.293198, 69.231333],
            [41.293246, 69.231644],
            [41.293424, 69.231789],
            [41.293663, 69.231692],
            [41.293825, 69.231762],
            [41.293865, 69.232073],
            [41.293865, 69.232073], //
            [41.294028, 69.231982],
            [41.294378, 69.231978],
            [41.294974, 69.232921],
            [41.295201, 69.233661],
            [41.295468, 69.234240],
            [41.295710, 69.234981],
            [41.296390, 69.235335],
            [41.296948, 69.236547],
            [41.296430, 69.237448],
            [41.296964, 69.237996],
            [41.296511, 69.239186],
            [41.296269, 69.239337],
            [41.295880, 69.239079],
            [41.295540, 69.239294],
            [41.295152, 69.239787],
            [41.294796, 69.240517],
            [41.293874, 69.240152],
            [41.293739, 69.239979],
            [41.293517, 69.239465],
            [41.291770, 69.237770],
            [41.290831, 69.237620],
            [41.289633, 69.237963],
            [41.288290, 69.237513],
            [41.287141, 69.236762],
            [41.286979, 69.236440],
            [41.286801, 69.235903],
            [41.286316, 69.235131],
            [41.285749, 69.235045],
            [41.285235, 69.235013],
            [41.285085, 69.234873],
            [41.284771, 69.234856]],
            "chilonzor", '8.7'
        ),
        bektopi: createDistrictPolygon(
            [[41.259529, 69.150640],
            [41.260306, 69.151713],
            [41.259464, 69.152786],
            [41.260225, 69.154159],
            [41.260290, 69.154417],
            [41.260484, 69.155597],
            [41.260192, 69.155811],
            [41.257828, 69.159545],
            [41.262168, 69.164073],
            [41.261051, 69.165682],
            [41.260808, 69.166369],
            [41.260095, 69.179501],
            [41.259270, 69.184200],
            [41.259577, 69.185423],
            [41.260079, 69.188105],
            [41.259205, 69.188491],
            [41.254477, 69.185702],
            [41.254724, 69.185230],
            [41.254639, 69.184500],
            [41.254622, 69.183127],
            [41.254217, 69.181518],
            [41.253230, 69.178814],
            [41.253246, 69.176733],
            [41.253157, 69.176733],
            [41.253218, 69.170625],
            [41.253962, 69.170646],
            [41.254011, 69.169241],
            [41.254145, 69.167621],
            [41.253788, 69.167578],
            [41.254355, 69.160990],
            [41.253189, 69.159724],
            [41.253525, 69.159317],
            [41.253473, 69.159191],
            [41.256776, 69.153923],
            [41.257885, 69.152319],
            [41.259407, 69.150409]],
            "Bekto'pi", '7.6'
        ),
        tirsakobod: createDistrictPolygon(
            [[41.240435, 69.194331],
            [41.240856, 69.193580],
            [41.250460, 69.183302],
            [41.253756, 69.188647],
            [41.254185, 69.189997],
            [41.254444, 69.191563],
            [41.254444, 69.195940],
            [41.254379, 69.202206],
            [41.254444, 69.204094],
            [41.254444, 69.204094],
            [41.258686, 69.211905],
            [41.259285, 69.213729],
            [41.259447, 69.214737],
            [41.259487, 69.216063],
            [41.258864, 69.215639],
            [41.258298, 69.215574],
            [41.257232, 69.215080],
            [41.256597, 69.214480],
            [41.255901, 69.214028],
            [41.255351, 69.213965],
            [41.254087, 69.214469],
            [41.253521, 69.215016],
            [41.253092, 69.215241],
            [41.249521, 69.208922],
            [41.247335, 69.205296],
            [41.243788, 69.199653],
            [41.240375, 69.194342]],
            'tirsakobod', '7.6'
        ),
        chopon_ota: createDistrictPolygon(
            [[41.286172, 69.195866],
            [41.286755, 69.194471],
            [41.292104, 69.194235],
            [41.293917, 69.197765],
            [41.290639, 69.200393],
            [41.290445, 69.199889],
            [41.290340, 69.199760],
            [41.290073, 69.199718],
            [41.290016, 69.199600],
            [41.289968, 69.197872],
            [41.288649, 69.197904],
            [41.288608, 69.195855],
            [41.286198, 69.195901]],
            "Cho'pon-ota", '7.6'
        ),
        kotarma: createDistrictPolygon(
            [[41.278830, 69.198039],
            [41.280910, 69.194659],
            [41.286786, 69.194434],
            [41.283589, 69.202759],
            [41.278779, 69.198021]],
            "ko'tarma", '7.6'
        ),
        qatortol: createDistrictPolygon(
            [[41.286209, 69.195899],
            [41.288609, 69.195871],
            [41.288653, 69.197908],
            [41.289958, 69.197880],
            [41.290032, 69.199618],
            [41.290148, 69.199757],
            [41.290345, 69.199800],
            [41.290426, 69.199870],
            [41.290651, 69.200409],
            [41.289350, 69.201498],
            [41.288283, 69.202729],
            [41.286463, 69.205573],
            [41.283589, 69.202750],
            [41.286197, 69.195904]],
            "Qatortol", '6.7'
        )
    }

    for (var key in neighborhoods) {
        if (neighborhoods.hasOwnProperty(key)) {
            map.geoObjects.add(neighborhoods[key].polygon);
        }
    }
    
    // Poligon yaratish uchun yordamchi funksiya
    function createDistrictPolygon(coordinates, name, area) {
        const krill = lotinToKirill(name.toLowerCase())
        const bg = findColorByText(krill)
        console.log(krill, bg)
        var polygon = new ymaps.Polygon([coordinates], {
            balloonContent: `
                <div style="padding: 5px;">
                    <b class='text-uppercase'>${name}</b><br>
                    <small>Hudud: ${area}</small>                                        
                </div>
            `,
            hintContent: name
        }, {
            fillColor: bg,
            strokeColor: '#800000',
            strokeWidth: 1,
            fillOpacity: 0.5
        });
        
        return {
            polygon: polygon,
            name: name,
            area: area
        };
    }

    var chilonzorBorders = [
        [41.222547, 69.174469],
        [41.225128, 69.171908],
        [41.225441, 69.172438],
        [41.225463, 69.172438],
        [41.226035, 69.171837],
        [41.226586, 69.172453],
        [41.227170, 69.173841],
        [41.228319, 69.174083],
        [41.23519529079133, 69.16803286210023],
        [41.23576006189457, 69.16577980664005],
        [41.23576006190187, 69.16462109230015],
        [41.23639744057159, 69.16528628010269],
        [41.23703481302622, 69.16557595866185],
        [41.23806750459672, 69.16564033167928],
        [41.238680657480806, 69.16576907770558],
        [41.23935834608159, 69.16648790968574],
        [41.2399069460257, 69.16679904592077],
        [41.24167897167312, 69.16671573743692],
        [41.24899008459856, 69.16426327554163],
        [41.25068583341618, 69.1631626110972],
        [41.251879614132186, 69.16198977198398],
        [41.25299198107476, 69.16049214665478],
        [41.259285993460985, 69.15076660334589],
        [41.26100860229474, 69.14899832283672],
        [41.26336926275403, 69.1555604137001],
        [41.26421605234161, 69.15785102008462],
        [41.26487734708744, 69.15913848058729],
        [41.266405557434105, 69.16194407116129],
        [41.26698618735296, 69.16262535225401],
        [41.268582892985194, 69.16377333769182],
        [41.26880062254248, 69.16412738926412],
        [41.26780067339862, 69.16779665116046],
        [41.26801840556441, 69.16799513461766],
        [41.26802243763473, 69.16799513461766],
        [41.269877163594735, 69.17112259030286],
        [41.268861102869096, 69.17218474501979],
        [41.270856921478774, 69.17538730262217],
        [41.27123591852043, 69.17621342295757],
        [41.271534276360086, 69.17735067968427],
        [41.27281639313764, 69.18285993697978],
        [41.274300069175666, 69.18918458581108],
        [41.27533217175353, 69.19324545027818],
        [41.2756466372802, 69.1943451560313],
        [41.276041732816616, 69.19475821619899],
        [41.27673112848472, 69.1959115660179],
        [41.27784785343446, 69.19711319580294],
        [41.278883931291716, 69.19801978240477],
        [41.2810558313198, 69.19450572003159],
        [41.29216057085208, 69.19405053411008],
        [41.30292147162992, 69.19368638532073],
        [41.30055057822702, 69.20112108902738],
        [41.30068736289146, 69.21890368710748],
        [41.3013940790368, 69.2209975424371],
        [41.30200959976224, 69.22230240880195],
        [41.30200959976224, 69.22369831235504],
        [41.29954748200343, 69.23155785627348],
        [41.31007922301885, 69.24020638970747],
        [41.31169758669414, 69.24035811883263],
        [41.31106506209144, 69.25998801375972],
        [41.310355601502, 69.25962007179056],
        [41.310147605568474, 69.25893729287873],
        [41.30928141524495, 69.25843949809008],
        [41.307576905497726, 69.25691063902781],
        [41.30429267709042, 69.25371344587128],
        [41.30334969012798, 69.25353642004823],
        [41.30286610178761, 69.25285513893301],
        [41.30224381988155, 69.25212565261283],
        [41.30225340478353, 69.25147495337013],
        [41.30165194930966, 69.25099649808733],
        [41.30117269792767, 69.25013846819478],
        [41.30079887942156, 69.24912414299523],
        [41.300103954691224, 69.24828525130633],
        [41.29725718124607, 69.24207171189504],
        [41.29507161919173, 69.24166343005372],
        [41.29488948571497, 69.24056617260513],
        [41.29383501874932, 69.24011961434118],
        [41.29297226026907, 69.2388947687236],
        [41.2917356200291, 69.23769544081469],
        [41.28966491411592, 69.23800165219569],
        [41.287038090669725, 69.23676404780944],
        [41.28636698744881, 69.23507988521395],
        [41.28534543538795, 69.23500942139523],
        [41.28511174238037, 69.23523907993098],
        [41.284898580778375, 69.23517718144356],
        [41.28441544175085, 69.23486993092249],
        [41.28381115663907, 69.23493251898623],
        [41.282041025132926, 69.23469923617769],
        [41.28137400659504, 69.23464044132363],
        [41.28111603392923, 69.23452285162216],
        [41.280158248013485, 69.23288797537246],
        [41.2801140640968, 69.23203260507847],
        [41.279464129502486, 69.2310406789988],
        [41.27924178196721, 69.23007530542091],
        [41.27848208885381, 69.22939631970048],
        [41.277877748801, 69.22863388321704],
        [41.2755201989824, 69.22600328767273],
        [41.273233835941284, 69.22466428228117],
        [41.27175136326917, 69.22328355151662],
        [41.27021753880102, 69.22253249469472],
        [41.269399294256715, 69.22162591598506],
        [41.268874700046375, 69.2215045330674],
        [41.26820469584959, 69.22115935035545],
        [41.26670215083998, 69.22057519503944],
        // [41.265852499066625, 69.2196079248451],
        // [41.26527940557002, 69.21898204417592],
        // [41.26512543929586, 69.21923618965977],
        // [41.26441547898111, 69.21839030239262],
        // [41.26291854942557, 69.21847375314812],
        // [41.261772305886375, 69.21789718427392],
        // [41.26047206496376, 69.21662266356807],
        [41.258997857008126, 69.21567435947827],
        [41.2577317795156, 69.21528365818884],
        [41.25628032263756, 69.21430880159373],
        [41.255641557317375, 69.21393706640487],
        [41.25403606158034, 69.21446432346397],
        [41.25323564020067, 69.2153870971996],
        [41.23636562314215, 69.18855516076857],
        [41.228289206149164, 69.17985260992957],
        
    ];

    var myPolygon = new ymaps.Polygon([chilonzorBorders], {}, {
        strokeColor: '#008000',
        strokeWidth: 3,
        fillOpacity: 0
    });
    
    map.geoObjects.add(myPolygon);
    
    const validLocationRegex = /^-?\d+(\.\d+)?, ?-?\d+(\.\d+)?$/;

    const crimeMarkers = data2.filter(item => validLocationRegex.test(item["Содир этилган жиноятнинг локацияси"]))
    .map(item => {
        const coords = item["Содир этилган жиноятнинг локацияси"]
        .split(',').map(coord => parseFloat(coord.trim()));
        return {
        coords: coords,
        title: `Жиноят: ${item["Ҳужжат id"]}`,
        color: "red"
        };
    });

    var clusterer = new ymaps.Clusterer({
        preset: 'islands#invertedRedClusterIcons', // markerlar guruhi uchun dizayn
        groupByCoordinates: false,
        clusterDisableClickZoom: false,
        clusterOpenBalloonOnClick: false
    });

    // Har bir marker uchun Placemark yaratish
    var placemarks = crimeMarkers.map(function (point) {
        var placemark = new ymaps.Placemark(point.coords, {
            hintContent: point.title,
            balloonContent: point.title
        }, {
            preset: point.color === "red" ? 'islands#redIcon' : 'islands#blueIcon'
        });

        // 🔍 Markerga klik qilinganda fokuslash
        placemark.events.add('click', function () {
            map.setCenter(point.coords, 20, {
                checkZoomRange: true
            });
        });

        return placemark;
    });

    // Markerlarni klasterga qo‘shish
    clusterer.add(placemarks);
    map.geoObjects.add(clusterer);
}

const lotinToKirill = (text) => {
    const map = [
        [/Sh/g, 'Ш'], [/sh/g, 'ш'], [/Ch/g, 'Ч'], [/ch/g, 'ч'], [/Yo/g, 'Ё'], [/yo/g, 'ё'],
        [/Yu/g, 'Ю'], [/yu/g, 'ю'], [/Ya/g, 'Я'], [/ya/g, 'я'], [/G'/g, 'Ғ'], [/g'/g, 'ғ'],
        [/O'/g, 'Ў'], [/o'/g, 'ў'],
        [/A/g, 'А'], [/a/g, 'а'], [/B/g, 'Б'], [/b/g, 'б'], [/D/g, 'Д'], [/d/g, 'д'],
        [/E/g, 'Э'], [/e/g, 'е'], [/F/g, 'Ф'], [/f/g, 'ф'], [/G/g, 'Г'], [/g/g, 'г'],
        [/H/g, 'Ҳ'], [/h/g, 'ҳ'], [/I/g, 'И'], [/i/g, 'и'], [/J/g, 'Ж'], [/j/g, 'ж'],
        [/K/g, 'К'], [/k/g, 'к'], [/L/g, 'Л'], [/l/g, 'л'], [/M/g, 'М'], [/m/g, 'м'],
        [/N/g, 'Н'], [/n/g, 'н'], [/O/g, 'О'], [/o/g, 'о'], [/P/g, 'П'], [/p/g, 'п'],
        [/Q/g, 'Қ'], [/q/g, 'қ'], [/R/g, 'Р'], [/r/g, 'р'], [/S/g, 'С'], [/s/g, 'с'],
        [/T/g, 'Т'], [/t/g, 'т'], [/U/g, 'У'], [/u/g, 'у'], [/V/g, 'В'], [/v/g, 'в'],
        [/X/g, 'Х'], [/x/g, 'х'], [/Y/g, 'Й'], [/y/g, 'й'], [/Z/g, 'З'], [/z/g, 'з']
    ];
    map.forEach(([r, l]) => {
        text = text.replace(r, l);
    });
    return text;
};